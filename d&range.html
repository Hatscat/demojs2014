<pre id=P>
<script>
	C=innerWidth/8|0; // nb de colonnes en fonctions de la largeur de la fenêtre
	R=innerHeight/16|0; // nb de lignes en fonctions de la hauteur de la fenêtre
	z=x=y=v=w=0; // la camera : z, x, y, rotation X, rotation Y
	A=[2,C/3,R/3,5,C/2,R/2,8,C/1.5,R/1.5]; // les spheres [z, x, y] // length = 9
	
	g=[1,1,1] // arg pas beau, poubelle, juste pour les tests : direction des spheres de test
	
	setInterval(RUN,99); // boucle
	// RUN(); //one shoot, pour les essais de rendu
	function RUN () { // à remplacer par une string
		//with(Math){
		// l'animation :
		for(i=9;i;(A[i+1]-=g[i/3],A[i+2]+=g[i/3]))A[i-=3]+=g[i/3]=A[i]<6?1:A[i]>18?-1:g[i/3] // pas terrible, en attendant ^^
		// le rendu :
		for(s='',n=R*C;n--;s+=n%C?'#@HO+|=-. '[p]:'\n') // lettre par lettre : n
			for(r=n/C|0,c=n%C,p=9,Z=z-1;++Z<9;) // raymarching itération : Z
				for(i=9;i;)(a=A[i-=3]-Z)*a+(b=A[i+1]-c+x)*b+(d=A[i+2]-r+y)*d<C/3&Z<p?p=Z:0; // forme par forme (spheres)
		P.innerHTML=s
	}
</script>